#!/usr/bin/env ruby

if defined?(JRUBY_VERSION) || RUBY_ENGINE == 'jruby' || RUBY_PLATFORM == 'java'
  begin
    require 'spoon'
    require 'readline'
  rescue LoadError => e
    if e.message =~ /spoon/
      p "*** You must install the 'spoon' gem to use JimmyJukebox on JRuby ***"
      exit
    elsif e.message =~ /readline/
      p "*** You must install 'readline' to use JimmyJukebox on JRuby ***"
      exit
    else
      raise
    end
  end
else
  begin
    require 'readline'
    require 'posix/spawn'
  rescue LoadError => e
    if e.message =~ /readline/
      p "*** You must install 'readline' or the 'rb-readline' gem to use JimmyJukebox in Ruby ***"
      exit
    elsif e.message =~ /posix/ || e.message =~ /spawn/
      p "*** You must install the 'posix-spawn' gem to use JimmyJukebox in Ruby ***"
      exit
    else
      raise
    end
  end
end

lib = File.expand_path('../lib', File.dirname(__FILE__))
$LOAD_PATH.unshift(lib) if File.directory?(lib) && !$LOAD_PATH.include?(lib)
require 'jimmy_jukebox'
include JimmyJukebox

